# CIRX OTC Backend Environment Configuration - PRODUCTION
# Copy this file to .env.local and configure with your actual production values
# Inherits shared constants from .env.base

# Application Configuration
APP_ENV=production
APP_DEBUG=false
APP_URL=https://api.cirx.io
APP_TIMEZONE=UTC

# Database Configuration
DB_CONNECTION=mysql
DB_HOST=localhost
DB_PORT=3306
DB_DATABASE=cirx_otc
DB_USERNAME=cirx_user
DB_PASSWORD=your_secure_password_here

# Redis Configuration
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=your_redis_password
REDIS_DATABASE=0

# Ethereum Blockchain Configuration (READ-ONLY for payment verification)
ETHEREUM_CHAIN_ID=1
ETHEREUM_NETWORK=mainnet
ETHEREUM_RPC_URL=https://mainnet.infura.io/v3/YOUR_INFURA_PROJECT_ID
ETHEREUM_RPC_URL_BACKUP=https://eth-mainnet.alchemyapi.io/v2/YOUR_ALCHEMY_KEY
ETHERSCAN_BASE_URL=https://etherscan.io
ETHERSCAN_API_KEY=YOUR_ETHERSCAN_API_KEY

# Polygon Configuration (READ-ONLY for payment verification)
POLYGON_RPC_URL=https://polygon-mainnet.infura.io/v3/YOUR_INFURA_PROJECT_ID
POLYGON_RPC_URL_BACKUP=https://polygon-rpc.com

# BSC Configuration (READ-ONLY for payment verification)
BSC_RPC_URL=https://bsc-dataseed1.binance.org
BSC_RPC_URL_BACKUP=https://bsc-dataseed2.binance.org

# CIRX Blockchain Configuration (REQUIRED - Only active private key)
CIRX_WALLET_PRIVATE_KEY=your_cirx_wallet_private_key_here_REQUIRED
CIRX_WALLET_ADDRESS=your_cirx_wallet_address_here

# =============================================================================
# BLOCKCHAIN VERIFICATION REQUIREMENTS (PRODUCTION)
# =============================================================================
# Production confirmation requirements (higher security for mainnet)

# Ethereum Networks (Production)
ETHEREUM_MIN_CONFIRMATIONS=12
SEPOLIA_MIN_CONFIRMATIONS=3
GOERLI_MIN_CONFIRMATIONS=3

# Other Networks (Production)
POLYGON_MIN_CONFIRMATIONS=20
BSC_MIN_CONFIRMATIONS=15

# Blockchain Verification Settings (Production)
BLOCKCHAIN_VERIFICATION_REQUIRED=true
BLOCKCHAIN_VERIFICATION_TIMEOUT=600
ALLOW_TESTNET_BYPASS=false

# Transaction Hash Validation (Production)
REQUIRE_VALID_TX_HASH=true
TX_HASH_MIN_LENGTH=64
TX_HASH_MAX_LENGTH=66

# Reorg Protection (Production - full security)
ETHEREUM_REORG_PROTECTION_BLOCKS=12
SEPOLIA_REORG_PROTECTION_BLOCKS=3

# Platform Configuration
PLATFORM_FEE_WALLET=your_platform_fee_wallet_address_here

# Supported Payment Tokens (Mainnet)
USDC_CONTRACT_ADDRESS=0xA0b86a33E6441e8532B8aE1F8A0b86a33E644122
USDT_CONTRACT_ADDRESS=0xdAC17F958D2ee523a2206206994597C13D831ec7
ETH_ADDRESS=0x0000000000000000000000000000000000000000

# API Security
API_KEY_REQUIRED=true
API_KEYS=your_primary_api_key_here,your_secondary_api_key_here
JWT_SECRET=your_jwt_secret_key_here

# Rate Limiting (Standardized)
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW=60

# CORS Configuration
CORS_ALLOWED_ORIGINS=https://your-frontend-domain.com,https://app.cirx.io

# Worker Configuration (Production)
WORKER_BATCH_SIZE=50

# Logging Configuration
LOG_LEVEL=info
LOG_CHANNEL=stack
LOG_FILE_PATH=/var/log/cirx-otc/application.log
LOG_MAX_FILES=14
API_LOGGING_ENABLED=true
LOG_REQUEST_BODY=false
LOG_RESPONSE_BODY=false

# Monitoring and Health Checks
HEALTH_CHECK_ENABLED=true
METRICS_ENABLED=true
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id

# Email Notifications
MAIL_MAILER=smtp
MAIL_HOST=smtp.mailgun.org
MAIL_PORT=587
MAIL_USERNAME=your-mailgun-username
MAIL_PASSWORD=your-mailgun-password
MAIL_ENCRYPTION=tls
MAIL_FROM_ADDRESS=noreply@cirx.io
MAIL_FROM_NAME="CIRX OTC"

# Notification Configuration
SLACK_WEBHOOK_URL=your_slack_webhook_url
TEAM_EMAIL=team@circular.com

# Telegram Bot Configuration
TELEGRAM_BOT_TOKEN=your_telegram_bot_token_here
TELEGRAM_CHAT_ID=your_telegram_chat_id_here
TELEGRAM_RATE_LIMIT_MESSAGES=3
TELEGRAM_RATE_LIMIT_WINDOW=300

# CIRX Balance Alert Threshold (in CIRX tokens)
# Sends warning notification when wallet balance drops below this threshold after a transfer
CIRX_BALANCE_ALERT_THRESHOLD=50

# Feature Flags
FEATURE_BATCH_TRANSFERS=true
FEATURE_AUTOMATIC_RETRIES=true
FEATURE_SLACK_NOTIFICATIONS=false
FEATURE_ADVANCED_MONITORING=true

# External Service API Keys
COINGECKO_API_KEY=your_coingecko_api_key
COINMARKETCAP_API_KEY=your_coinmarketcap_api_key

# Security Configuration
ENCRYPTION_KEY=your_32_character_encryption_key

# Production Monitoring Configuration
ALERT_STUCK_PAYMENT_MINUTES=30
ALERT_FAILED_TRANSFER_PERCENT=25.0
ALERT_WALLET_CONFIG_FAILURES=3
MONITORING_LOG_FILE=/var/log/cirx-otc/monitoring.log

# Health Check Endpoints
HEALTH_CHECK_SECRET=your_health_check_secret_for_monitoring_endpoints