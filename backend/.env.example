# =============================================================================
# CIRX OTC Backend - Environment Configuration Template
# =============================================================================
# Copy this file to .env.local and configure with your environment-specific values
# This template includes ALL variables found across development, production, e2e, and base configurations
# 
# Environment Options: development, production, e2e_testing
# =============================================================================

# =============================================================================
# APPLICATION CONFIGURATION
# =============================================================================
APP_NAME="CIRX OTC Platform"
APP_ENV=development
APP_KEY=base64:YOUR_APP_KEY_HERE_REPLACE_WITH_ACTUAL_KEY
APP_DEBUG=true
APP_URL=http://localhost:8080
APP_TIMEZONE=UTC

# =============================================================================
# ADMIN SECURITY CONFIGURATION  
# =============================================================================
ADMIN_TOKEN_REQUIRED=true
ADMIN_TOKEN=your_admin_token_here_replace_me

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
# SQLite (Development)
DB_CONNECTION=sqlite
DB_DATABASE=storage/database.sqlite

# MySQL/PostgreSQL (Production/E2E)
# DB_CONNECTION=mysql
# DB_HOST=localhost
# DB_PORT=3306
# DB_DATABASE=cirx_otc
# DB_USERNAME=cirx_user
# DB_PASSWORD=your_secure_password_here

# PostgreSQL (E2E Testing)
# DB_CONNECTION=pgsql
# DB_HOST=postgres-e2e
# DB_PORT=5432
# DB_DATABASE=cirx_e2e_test
# DB_USERNAME=cirx_test
# DB_PASSWORD=test_password_123

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=your_redis_password
REDIS_DATABASE=0

# =============================================================================
# BLOCKCHAIN CONFIGURATION - ETHEREUM
# =============================================================================
# Development (Sepolia Testnet)
ETHEREUM_RPC_URL=https://sepolia.infura.io/v3/YOUR_INFURA_PROJECT_ID
ETHEREUM_RPC_URL_BACKUP=https://eth-sepolia.alchemyapi.io/v2/YOUR_ALCHEMY_KEY
ETHEREUM_CHAIN_ID=11155111
ETHEREUM_NETWORK=sepolia
ETHERSCAN_API_KEY=YOUR_ETHERSCAN_API_KEY
ETHERSCAN_BASE_URL=https://sepolia.etherscan.io

# Production (Mainnet) - Uncomment for production
# ETHEREUM_RPC_URL=https://mainnet.infura.io/v3/YOUR_INFURA_PROJECT_ID
# ETHEREUM_RPC_URL_BACKUP=https://eth-mainnet.alchemyapi.io/v2/YOUR_ALCHEMY_KEY
# ETHEREUM_CHAIN_ID=1
# ETHEREUM_NETWORK=mainnet
# ETHERSCAN_BASE_URL=https://etherscan.io

# =============================================================================
# BLOCKCHAIN CONFIGURATION - OTHER NETWORKS (Production Only)
# =============================================================================
# Polygon Configuration (READ-ONLY for payment verification)
POLYGON_RPC_URL=https://polygon-mainnet.infura.io/v3/YOUR_INFURA_PROJECT_ID
POLYGON_RPC_URL_BACKUP=https://polygon-rpc.com

# BSC Configuration (READ-ONLY for payment verification)
BSC_RPC_URL=https://bsc-dataseed1.binance.org
BSC_RPC_URL_BACKUP=https://bsc-dataseed2.binance.org

# =============================================================================
# CIRX BLOCKCHAIN CONFIGURATION (REQUIRED)
# =============================================================================
CIRX_WALLET_PRIVATE_KEY=your_cirx_wallet_private_key_here_REQUIRED
CIRX_WALLET_ADDRESS=your_cirx_wallet_address_here

# Payment Verification Configuration
# ===========================================
# INDEXER_URL: URL for payment indexer service
#
# ARCHITECTURE NOTE: This system uses a custodial wallet + NAG API model, not smart contracts.
# The indexer service was designed for smart contract event monitoring and is NOT needed
# for this architecture. Setting INDEXER_URL to a disabled endpoint forces the system
# to use direct blockchain verification via RPC calls, which is the correct approach.
#
# For production: Use http://disabled:3001 to force blockchain fallback verification
# For development: Use http://localhost:3001 only if you have a separate indexer service
INDEXER_URL=http://localhost:3001

# =============================================================================
# ETHEREUM PRIVATE KEYS (TESTING ONLY)
# =============================================================================
# SECURITY WARNING: Only use testnet keys here!
# These keys are ONLY needed for E2E testing and transaction signing tests
# Production systems should NEVER include Ethereum private keys
SEPOLIA_PRIVATE_KEY=your_sepolia_testnet_private_key_here
ETHEREUM_PRIVATE_KEY=your_ethereum_testnet_private_key_here

# =============================================================================
# E2E TESTING CONFIGURATION
# =============================================================================
TESTNET_MODE=true
E2E_TESTING_ENABLED=true
SEED_PHRASE="your development seed phrase goes here"

# Test Wallet Configuration
TEST_WALLET_FUNDING_THRESHOLD=0.01
MAX_GAS_PRICE_GWEI=20
TRANSACTION_TIMEOUT_SECONDS=300
GAS_LIMIT=21000

# Performance Testing Thresholds
MAX_API_RESPONSE_TIME=2.0
MAX_PAYMENT_VERIFICATION_TIME=30.0
MAX_CIRX_TRANSFER_TIME=60.0
MAX_END_TO_END_TIME=120.0

# =============================================================================
# API SECURITY CONFIGURATION
# =============================================================================
API_KEY_REQUIRED=false
API_KEYS=dev-api-key-replace-me,secondary-dev-key-replace-me
JWT_SECRET=dev-jwt-secret-replace-me-with-secure-value

# =============================================================================
# RATE LIMITING CONFIGURATION
# =============================================================================
RATE_LIMIT_ENABLED=false
RATE_LIMIT_REQUESTS=1000
RATE_LIMIT_WINDOW=60

# =============================================================================
# CORS CONFIGURATION
# =============================================================================
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://127.0.0.1:3000,https://*.ngrok-free.app,https://*.trycloudflare.com,https://*.pages.dev
CORS_ALLOW_CREDENTIALS=false
CORS_MAX_AGE=86400

# =============================================================================
# WORKER CONFIGURATION
# =============================================================================
WORKER_BATCH_SIZE=10
PAYMENT_VERIFICATION_INTERVAL=30
CIRX_TRANSFER_INTERVAL=60
WORKER_TIMEOUT=300
WORKER_PROCESS_INTERVAL=30

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================
LOG_LEVEL=debug
LOG_CHANNEL=stack
LOG_FILE_PATH=/tmp/cirx-otc-dev/application.log
LOG_MAX_FILES=7
API_LOGGING_ENABLED=true
LOG_REQUEST_BODY=true
LOG_RESPONSE_BODY=true

# =============================================================================
# PLATFORM CONFIGURATION
# =============================================================================
PLATFORM_FEE_WALLET=your_platform_fee_wallet_address_here
PLATFORM_FEE_PERCENTAGE=0.5

# =============================================================================
# SUPPORTED PAYMENT TOKENS
# =============================================================================
# Testnet Addresses (Development/Testing)
USDC_CONTRACT_ADDRESS=0x1c7D4B196Cb0C7B01d743Fbc6116a902379C7238
USDT_CONTRACT_ADDRESS=0x7169D38820dfd117C3FA1f22a697dBA58d90BA06
ETH_ADDRESS=0x0000000000000000000000000000000000000000

# Production Addresses (Uncomment for mainnet)
# USDC_CONTRACT_ADDRESS=0xA0b86a33E6441e8532B8aE1F8A0b86a33E644122
# USDT_CONTRACT_ADDRESS=0xdAC17F958D2ee523a2206206994597C13D831ec7

# =============================================================================
# FEATURE FLAGS
# =============================================================================
FEATURE_BATCH_TRANSFERS=false
FEATURE_AUTOMATIC_RETRIES=true
FEATURE_SLACK_NOTIFICATIONS=false
FEATURE_ADVANCED_MONITORING=false

# =============================================================================
# TELEGRAM BOT CONFIGURATION
# =============================================================================
TELEGRAM_BOT_TOKEN=your_telegram_bot_token_here
TELEGRAM_CHAT_ID=your_telegram_chat_id_here
TELEGRAM_RATE_LIMIT_MESSAGES=3
TELEGRAM_RATE_LIMIT_WINDOW=300

# =============================================================================
# IROH DISTRIBUTED NETWORKING (Optional)
# =============================================================================
IROH_ENABLED=true
IROH_BRIDGE_URL=http://localhost:9090

# =============================================================================
# MONITORING AND HEALTH CHECKS (Production)
# =============================================================================
HEALTH_CHECK_ENABLED=true
METRICS_ENABLED=true
PROMETHEUS_ENABLED=true
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id

# Health Check Secret
HEALTH_CHECK_SECRET=your_health_check_secret_for_monitoring_endpoints

# Production Monitoring Alerts
ALERT_STUCK_PAYMENT_MINUTES=30
ALERT_FAILED_TRANSFER_PERCENT=25.0
ALERT_WALLET_CONFIG_FAILURES=3
MONITORING_LOG_FILE=/var/log/cirx-otc/monitoring.log

# =============================================================================
# EMAIL/MAIL CONFIGURATION
# =============================================================================
MAIL_MAILER=smtp
MAIL_DRIVER=log
MAIL_HOST=smtp.mailgun.org
MAIL_PORT=587
MAIL_USERNAME=your-mailgun-username
MAIL_PASSWORD=your-mailgun-password
MAIL_ENCRYPTION=tls
MAIL_FROM_ADDRESS=noreply@cirx.io
MAIL_FROM_NAME="CIRX OTC"

# =============================================================================
# NOTIFICATION CONFIGURATION
# =============================================================================
SLACK_WEBHOOK_URL=your_slack_webhook_url
TEAM_EMAIL=team@circular.com

# =============================================================================
# EXTERNAL SERVICE API KEYS
# =============================================================================
COINGECKO_API_KEY=your_coingecko_api_key
COINMARKETCAP_API_KEY=your_coinmarketcap_api_key

# =============================================================================
# SECURITY AND ENCRYPTION
# =============================================================================
ENCRYPTION_KEY=your_32_character_encryption_key
HASH_ROUNDS=12

# =============================================================================
# SESSION CONFIGURATION
# =============================================================================
SESSION_DRIVER=redis
SESSION_LIFETIME=120

# =============================================================================
# CACHE CONFIGURATION
# =============================================================================
CACHE_DRIVER=redis
CACHE_PREFIX=cirx_otc
CACHE_TTL=3600

# =============================================================================
# QUEUE CONFIGURATION
# =============================================================================
QUEUE_CONNECTION=redis
QUEUE_DEFAULT=default
QUEUE_RETRY_AFTER=90
QUEUE_MAX_ATTEMPTS=3

# =============================================================================
# PROTOCOL CONSTANTS (DO NOT MODIFY)
# =============================================================================
# CIRX Blockchain Constants (Never Change)
CIRX_NAG_URL=https://nag.circularlabs.io/NAG.php?cep=
CIRX_NAG_URL_BACKUP=https://nag.circularlabs.io/NAG_Mainnet.php?cep=
CIRX_CHAIN_ID=9999
CIRX_DECIMALS=18

# Token Decimals (Protocol Constants)
USDC_DECIMALS=6
USDT_DECIMALS=6
ETH_DECIMALS=18

# Sepolia Testnet Constants
SEPOLIA_CHAIN_ID=11155111
SEPOLIA_USDC_CONTRACT=0x1c7D4B196Cb0C7B01d743Fbc6116a902379C7238
SEPOLIA_USDT_CONTRACT=0x7169D38820dfd117C3FA1f22a697dBA58d90BA06
SEPOLIA_ETH_ADDRESS=0x0000000000000000000000000000000000000000

# Worker Base Configuration
PAYMENT_VERIFICATION_MAX_RETRIES=3
PAYMENT_VERIFICATION_RETRY_DELAY=30
CIRX_TRANSFER_MAX_RETRIES=3
CIRX_TRANSFER_RETRY_DELAY=60

# Blockchain Configuration Constants
ETHEREUM_CHAIN_ID=1
POLYGON_CHAIN_ID=137
BSC_CHAIN_ID=56
GOERLI_CHAIN_ID=5

# Timeout Constants
PAYMENT_VERIFICATION_TIMEOUT=300
CIRX_TRANSFER_TIMEOUT=600
BLOCKCHAIN_CONFIRMATION_BLOCKS=3