<!DOCTYPE html>
<html>
<head>
    <title>OTC Dropdown Test</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
</head>
<body>
    <div id="app">
        <h2>OTC Dropdown Visibility Test</h2>
        
        <div class="tabs">
            <button @click="activeTab = 'liquid'" :class="{ active: activeTab === 'liquid' }">
                Liquid ({{ activeTab === 'liquid' ? 'Active' : 'Inactive' }})
            </button>
            <button @click="activeTab = 'otc'" :class="{ active: activeTab === 'otc' }">
                OTC ({{ activeTab === 'otc' ? 'Active' : 'Inactive' }})
            </button>
        </div>
        
        <div class="conditions">
            <h3>Dropdown Visibility Conditions:</h3>
            <ul>
                <li>activeTab === 'otc': <strong>{{ activeTab === 'otc' }}</strong></li>
                <li>discountTiers exists: <strong>{{ !!discountTiers }}</strong></li>
                <li>discountTiers.length > 0: <strong>{{ discountTiers && discountTiers.length > 0 }}</strong></li>
                <li><strong>Show Dropdown: {{ activeTab === 'otc' && discountTiers && discountTiers.length > 0 }}</strong></li>
            </ul>
        </div>
        
        <div class="dropdown-test">
            <h3>Expected Dropdown Behavior:</h3>
            <div v-if="activeTab === 'otc' && discountTiers && discountTiers.length > 0" class="dropdown-visible">
                <strong>✅ DROPDOWN SHOULD BE VISIBLE</strong>
                <div class="mock-dropdown">
                    <div>Mock Dropdown with {{ discountTiers.length }} tiers:</div>
                    <ul>
                        <li v-for="tier in discountTiers" :key="tier.minAmount">
                            {{ tier.discount }}% (min ${{ tier.minAmount.toLocaleString() }})
                        </li>
                    </ul>
                </div>
            </div>
            <div v-else class="dropdown-hidden">
                <strong>❌ DROPDOWN HIDDEN</strong>
                <p>Reason: {{ getHiddenReason() }}</p>
            </div>
        </div>
    </div>

    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .tabs button { padding: 10px 20px; margin: 5px; border: 1px solid #ccc; background: #f5f5f5; cursor: pointer; }
        .tabs button.active { background: #007bff; color: white; }
        .conditions, .dropdown-test { margin: 20px 0; padding: 15px; border: 1px solid #ddd; border-radius: 5px; }
        .dropdown-visible { color: green; }
        .dropdown-hidden { color: red; }
        .mock-dropdown { background: #f0f0f0; padding: 10px; margin: 10px 0; border-radius: 3px; }
        .mock-dropdown ul { margin: 5px 0; }
    </style>

    <script>
        const { createApp, ref } = Vue

        createApp({
            setup() {
                const activeTab = ref('liquid')
                
                // Mock the discount tiers data from the actual config
                const discountTiers = ref([
                    { minAmount: 50000, discount: 12, vestingMonths: 6 },
                    { minAmount: 10000, discount: 8, vestingMonths: 6 },
                    { minAmount: 1000, discount: 5, vestingMonths: 6 }
                ])

                const getHiddenReason = () => {
                    if (activeTab.value !== 'otc') {
                        return 'activeTab is not "otc"'
                    }
                    if (!discountTiers.value) {
                        return 'discountTiers is null/undefined'
                    }
                    if (discountTiers.value.length === 0) {
                        return 'discountTiers array is empty'
                    }
                    return 'Unknown reason'
                }

                return {
                    activeTab,
                    discountTiers,
                    getHiddenReason
                }
            }
        }).mount('#app')
    </script>
</body>
</html>